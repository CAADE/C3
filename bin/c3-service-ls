#!/usr/bin/env node

var program = require('commander');
var Client = require('node-rest-client').Client;
var config = require('./c3-config');
var _ = require('lodash');

var client = new Client();

program
  .parse(process.argv);

var url = config.Url + "/service/list";

client.get(url, function (data, response) {
  // parsed response body as js object
  if(data.error) {
    console.error(data.error);
  }
  else {
    console.log("Name\tVersion\tEnvironments");
    console.log("======\t======\t======");
    _.each(data.services, function(service) {
      console.log("%s\t%s\t%s", service.name, service.version, service.envs);
    })
  }
});
