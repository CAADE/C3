#!/usr/bin/env node

var fs = require('fs');
var YAML = require('yamljs');

var program = require('commander');
var Client = require('node-rest-client').Client;
var config = require('./UHC-config');
var _ = require('lodash');

var client = new Client();


program
  .parse(process.argv);

var name = program.args;

var url = config.UHCUrl + "/cloud/list";

client.get(url, function (data, response) {
  // parsed response body as js object
  if (data.error) {
    console.error("Error:" + data.error);
  }
  else {
    console.log("Name\t\tType");
    console.log("========\t========");
    var sClouds = data.clouds.sort(function(a,b) { return a.name.localeCompare(b.name);});
    _.each(sClouds, function(cloud) {
      console.log(cloud.name + "\t\t" + cloud.type);
    })
  }
});
