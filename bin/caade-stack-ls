#!/usr/bin/env node

var program = require('commander');
var Client = require('node-rest-client').Client;
var config = require('./caade-config');
var _ = require('lodash');

var client = new Client();

program
  .parse(process.argv);


var url = config.caadeUrl + "/stack/list";

client.get(url, function (data, response) {
  // parsed response body as js object
  console.log("Name\tVersion\t\tEnvironments");
  console.log("======\t========\t============");
  _.each(data.stacks, function(stack) {
    console.log("%s\t%s\t%s", stack.name, stack.version, stack.envs.join(','));
  })
});
